<div id="card-<%= card.id %>-analysis" class="p-3 bg-blue-50 rounded-lg fade-in">
  <div class="flex items-center gap-2 mb-2">
    <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    <h4 class="text-sm font-medium text-blue-900">AI Analysis Complete</h4>
  </div>

  <% if analysis.respond_to?(:success?) ? analysis.success? : analysis.summary.present? %>
    <p class="text-sm text-blue-800 mb-3"><%= analysis.summary %></p>

    <div class="grid grid-cols-2 gap-3 text-xs stagger-fade-in">
      <% if analysis.complexity_score %>
        <div class="bg-white/50 rounded p-2">
          <span class="text-blue-600 block">Complexity</span>
          <span class="font-semibold text-blue-900 text-lg"><%= analysis.complexity_score %>/5</span>
        </div>
      <% end %>

      <% if analysis.estimated_effort %>
        <div class="bg-white/50 rounded p-2">
          <span class="text-blue-600 block">Effort</span>
          <span class="font-semibold text-blue-900 text-lg"><%= analysis.estimated_effort.to_s.capitalize %></span>
        </div>
      <% end %>
    </div>

    <% blockers = analysis.potential_blockers.is_a?(Array) ? analysis.potential_blockers : [] %>
    <% if blockers.any? %>
      <div class="mt-3">
        <span class="text-xs text-blue-600 font-medium">Potential blockers:</span>
        <ul class="text-xs text-blue-800 list-disc list-inside mt-1 stagger-fade-in">
          <% blockers.first(3).each do |blocker| %>
            <li class="py-0.5"><%= blocker %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <% subtasks = analysis.suggested_subtasks.is_a?(Array) ? analysis.suggested_subtasks : [] %>
    <% if subtasks.any? %>
      <div class="mt-3">
        <span class="text-xs text-blue-600 font-medium">Suggested subtasks:</span>
        <ul class="text-xs text-blue-800 list-disc list-inside mt-1 stagger-fade-in">
          <% subtasks.first(3).each do |subtask| %>
            <li class="py-0.5"><%= subtask %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <% if analysis.respond_to?(:provider) && analysis.provider %>
      <div class="mt-3 pt-2 border-t border-blue-200">
        <span class="text-xs text-blue-400">Analyzed by <%= analysis.provider %></span>
      </div>
    <% end %>
  <% else %>
    <p class="text-sm text-blue-700">Analysis not available</p>
  <% end %>
</div>
